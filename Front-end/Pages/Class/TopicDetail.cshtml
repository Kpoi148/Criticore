@page
@model Front_end.Pages.Class.TopicDetailModel
@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết chủ đề</title>
    <!-- Thêm CSS nếu cần, ví dụ Tailwind hoặc custom -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script> <!-- Nếu cần marked, nhưng có thể loại nếu không dùng -->
</head>
<body>
    <div id="topicInfo"></div>
    <div id="promptBlock"></div>
    <div id="answersList"></div>

    <!-- Modal chi tiết câu trả lời -->
    <div id="answerModal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white p-6 rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h2 class="text-xl font-bold">Chi tiết câu trả lời</h2>
                <button onclick="closeAnswerDetail()" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            <div class="flex items-center gap-3 mb-3">
                <div id="answerAvatar"></div>
                <div>
                    <div id="answerAuthor" class="font-semibold"></div>
                    <div class="text-xs text-gray-500">Created at: <!-- Thêm nếu cần --></div>
                </div>
            </div>
            <div id="answerText" class="text-sm text-gray-700 mb-4"></div>
            <div class="mt-3 text-sm text-gray-500">
                <div id="likeCount">
                    <!-- Sao sẽ render động -->
                </div>
                <span id="ratingLabel" class="text-gray-500 ml-2 hidden"></span>
            </div>
            <div class="mt-4">
                <h3 class="font-medium mb-2">Phản hồi (<span id="replyCount"></span>)</h3>
                <div id="replyList" class="space-y-4 max-h-48 overflow-y-auto"></div>
            </div>
            <div class="mt-4 flex gap-2">
                <textarea id="replyInput" placeholder="Nhập phản hồi..." class="flex-1 border p-2 rounded"></textarea>
                <button id="submitReply" onclick="sendReply()" class="bg-blue-500 text-white px-4 py-2 rounded">Gửi</button>
            </div>
        </div>
    </div>

    <!-- Form gửi câu trả lời -->
    <div id="answerBar" class="mt-6">
        <textarea id="answerContent" placeholder="Nhập câu trả lời của bạn..." class="w-full border p-2 rounded"></textarea>
        <button id="submitAnswer" onclick="sendAnswer()" class="bg-blue-500 text-white px-4 py-2 rounded mt-2">Gửi câu trả lời</button>
    </div>

    <!-- Toast thông báo -->
    <div id="toast" class="fixed bottom-4 right-4 px-4 py-2 rounded text-white hidden transition-opacity"></div>

    <!-- Các link và info khác -->
    <a id="discussionLink" href="#">Thảo luận</a>
    <a id="thisHomeworkLink" href="#">Bài tập</a>
    <span id="infoStudents"></span>
    <span id="infoAssignments"></span>
    <span id="infoDiscussions"></span>
    <script>
        window.cls = @Json.Serialize(Model.CurrentClass);
        window.topic = @Json.Serialize(Model.CurrentTopic);
    </script>
    <!-- Include file JS riêng -->
    <script src="~/js/TopicDetail.js"></script>
</body>
</html>